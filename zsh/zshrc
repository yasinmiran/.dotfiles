#!/usr/bin/env zsh

export PATH="$PATH"
export DOTFILES_DIR="$HOME/.dotfiles"
export DEVELOPMENT_DIR="$HOME/dev"
export OMZ_INSTALLATION_PATH="$HOME/.oh-my-zsh"

# Fixes `insecure completion-dependent directories detected` error warning.
# https://github.com/ohmyzsh/ohmyzsh/issues/6835
# https://stackoverflow.com/a/61433333
export ZSH_DISABLE_COMPFIX="true"

alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias ......="cd ../../../../.."
alias .......="cd ../../../../../.."

alias d="cd ~/Documents"
alias dl="cd ~/Downloads"
alias dt="cd ~/Desktop"
alias dev='cd $DEVELOPMENT_DIR'
alias bins='cd $BINARIES_DIR'
alias dotfiles='cd "$DOTFILES_DIR"'

alias cls="clear"

alias fit="git"
alias hit="git"
alias gut="git"
alias got="git"

alias grv="git remote -v"
alias gst="git status"
alias gstash="git stash"     
alias gstashall="git stash -u"
alias gp="git push"
alias gpristinesoft="git clean -dff"
alias gundo="git reset HEAD~1"

alias stfu='osascript -e "set volume output volume 0"'
alias vv='osascript -e "set volume output volume 50"'
alias vvv='osascript -e "set volume output volume 80"'
alias vvvv='osascript -e "set volume output volume 100"'
alias mute='osascript -e "set volume input volume 0"'
alias unmute='osascript -e "set volume input volume 100"'

alias dpsa="docker ps -a --no-trunc | less -S"

alias rrr="exec zsh"

function ls() {
  exa -laFh --git
}
export -f ls

# Append to $PATH.
function atop() {
  local new_path && new_path=${1}
  if [[ -n "$new_path" ]] && [[ -d "$new_path" ]]; then
    PATH="$PATH:$new_path"
  else
    echo "Nothing done. Path is invalid! ${new_path}"
  fi
}

PERSONAL_ALIASES="$(alias -L)"

source "$DOTFILES_DIR/zsh/oh_my_zsh"

atop "/opt/homebrew/bin" # Homebrew system binaries (dynamic)
atop "/opt/homebrew/sbin" # Homebrew system binaries (static)
atop "/Applications/Visual Studio Code.app/Contents/Resources/app/bin" # VSCode Shortcut

# if Java installed via brew, then pick it up from libs and export it's path.
[ -d "/usr/libexec/java_home" ] && export JAVA_HOME="$(/usr/libexec/java_home -v1.8)"

# nvm related source loaders
export NVM_DIR="$HOME/.nvm"
[ -s "/opt/homebrew/opt/nvm/nvm.sh" ] && \. "/opt/homebrew/opt/nvm/nvm.sh"  # This loads nvm
[ -s "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm" ] && \. "/opt/homebrew/opt/nvm/etc/bash_completion.d/nvm"  # This loads nvm bash_completion

eval "$PERSONAL_ALIASES"
echo -e "A new $(ps -o comm= $$) session created with pid $$"
echo -e "$USER's $(echo $0) environment is ready âœ….\n"
